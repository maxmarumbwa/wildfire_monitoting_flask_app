<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>FRP Trend</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: Arial, sans-serif; background:#f5f5f5; margin:0; padding:20px; }
    .card { background:#fff; padding:20px; border-radius:8px; max-width:900px; margin:auto; }
    h2 { margin-bottom:10px; }
  </style>
</head>
<body>
  <div class="card">
    <h2>Yearly fire detections</h2>
    <canvas id="frpTrendChart"></canvas>
  </div>

  <script>
    fetch('/api/fires/summary/year')
      .then(res => res.json())
      .then(result => {
        const data = result.data;
        const years = data.map(d => d.year);
        const fire_count = data.map(d => d.fire_count);

        new Chart(document.getElementById('frpTrendChart'), {
          type: 'bar',
          data: {
            labels: years,
            datasets: [{
              label: 'Total Fire detections',
              data: fire_count,
              fill: false,
              tension: 0.3
            }]
          },
          options: {
            responsive: true,
            plugins: { legend: { display: true } },
            scales: {
              y: { beginAtZero: true, title: { display: true, text: 'Yearly fire detections' } },
              x: { title: { display: true, text: 'Year' } }
            }
          }
        });
      });
  </script>
</body>
</html>
